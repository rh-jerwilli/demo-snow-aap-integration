---
- name: Create a basic rhel vm
  hosts: all
  gather_facts: true

  tasks:
    - name: Create a VirtualMachine
      redhat.openshift_virtualization.kubevirt_vm:
        state: present
        name: "{{ vm_name }}"
        namespace: "{{ vm_namespace }}"
        labels:
          app: test
        instancetype:
          name: "{{ vm_instance_type }}"
        preference:
          name: fedora
        spec:
          name: default